{% extends "base.html" %}

{% block title %}Login - Learning Support Platform{% endblock %}

{% block content %}
<div style="max-width: 400px; margin: 2rem auto;">
    <div class="card">
        <div class="card-header" style="text-align: center;">
            <h2 class="card-title">Login to Your Account</h2>
            <p style="color: #64748b;">Access your personalized learning dashboard</p>
        </div>
        
        {% if error %}
            <div class="alert alert-error">{{ error }}</div>
        {% endif %}
        
        <form method="POST" id="loginForm">
            <div class="form-group">
                <label class="form-label">Username or Email</label>
                <input type="text" name="username" class="form-input" required>
            </div>
            <div class="form-group">
                <label class="form-label">Password</label>
                <input type="password" name="password" class="form-input" required>
            </div>
            <div class="form-group">
                <label class="form-label">Login as</label>
                <select name="role" class="form-input">
                    <option value="patient">Patient</option>
                    <option value="doctor">Doctor</option>
                </select>
            </div>
            <button type="submit" class="btn btn-primary" style="width: 100%; margin-bottom: 1rem;">Login</button>
        </form>
        
        <div style="text-align: center; margin-bottom: 2rem;">
            <p style="color: #64748b;">Don't have an account? <a href="/auth/register" style="color: #3b82f6;">Register here</a></p>
        </div>
        
        <div class="card" style="background: #f8fafc; border: 2px solid #e2e8f0;">
            <h4 style="margin-bottom: 1rem; color: #1e293b;">Quick Login (Demo Accounts)</h4>
            
            {% for user in sample_users %}
            <div style="margin-bottom: 1rem; padding: 1rem; background: white; border-radius: 8px; border: 1px solid #e2e8f0;">
                <div style="display: flex; justify-content: space-between; align-items: center;">
                    <div>
                        <strong>{{ user.username }}</strong> ({{ user.role }})
                        <br>
                        <small style="color: #64748b;">{{ user.email }} / {{ user.password }}</small>
                    </div>
                    <button onclick="quickLogin('{{ user.username }}', '{{ user.password }}')" class="btn btn-success" style="padding: 0.5rem 1rem; font-size: 0.9rem;">
                        Quick Login
                    </button>
                </div>
            </div>
            {% endfor %}
        </div>
    </div>
</div>

<script>
function quickLogin(username, password) {
    document.querySelector('input[name="username"]').value = username;
    document.querySelector('input[name="password"]').value = password;
    document.getElementById('loginForm').submit();
}
</script>
{% endblock %}
